{% load static %}
<style>
    .nav-menu-icon {
        font-size: 1.5em;
        margin: 0 0.5em 0 0;
        border: 0;
    }

    .hide-border {
        border: 0;
        outline: 0;
    }

    .navbar-toggler {
        border: 0;
        outline: 0;

    }
</style>
<nav class="navbar navbar-dark bg-dark fixed-top px-3">
    <div class="container-fluid">
        <a href="/" class="navbar-brand text-light logo">StudyMate</a>

        <!--       <form  >
        <input class="form-control text-light bg-dark me-2 search-background" name='q' type="search"
        placeholder="Search rooms" aria-label="Search">
        <button class="btn btn-success" >Search</button>
      </form> -->
        <form action="{% url 'home' %}" method="GET" class="search-form form nav-link d-none d-md-flex w-50"
            role="search">
            <label for="search">
                <input name='q' class="input" type="text" required="" placeholder="Search for rooms" id="search">
                <div class="fancy-bg"></div>
                <div class="search">
                    <svg viewBox="0 0 24 24" aria-hidden="true"
                        class="r-14j79pv r-4qtqp9 r-yyyyoo r-1xvli5t r-dnmrzs r-4wgw6l r-f727ji r-bnwqim r-1plcrui r-lrvibr">
                        <g>
                            <path
                                d="M21.53 20.47l-3.66-3.66C19.195 15.24 20 13.214 20 11c0-4.97-4.03-9-9-9s-9 4.03-9 9 4.03 9 9 9c2.215 0 4.24-.804 5.808-2.13l3.66 3.66c.147.146.34.22.53.22s.385-.073.53-.22c.295-.293.295-.767.002-1.06zM3.5 11c0-4.135 3.365-7.5 7.5-7.5s7.5 3.365 7.5 7.5-3.365 7.5-7.5 7.5-7.5-3.365-7.5-7.5z">
                            </path>
                        </g>
                    </svg>
                </div>
                <button class="close-btn" type="reset">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd"
                            d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                            clip-rule="evenodd"></path>
                    </svg>
                </button>
            </label>
        </form>
        <a href="{% url 'chatbot' %}" class="assistant">
            <svg class="svgIcon" xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 384 512">
                <path
                    d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM105.8 229.3c7.9-22.3 29.1-37.3 52.8-37.3h58.3c34.9 0 63.1 28.3 63.1 63.1c0 22.6-12.1 43.5-31.7 54.8L216 328.4c-.2 13-10.9 23.6-24 23.6c-13.3 0-24-10.7-24-24V314.5c0-8.6 4.6-16.5 12.1-20.8l44.3-25.4c4.7-2.7 7.6-7.7 7.6-13.1c0-8.4-6.8-15.1-15.1-15.1H158.6c-3.4 0-6.4 2.1-7.5 5.3l-.4 1.2c-4.4 12.5-18.2 19-30.6 14.6s-19-18.2-14.6-30.6l.4-1.2zM160 416a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z" />
            </svg>
            <span class="tooltiptext">Assistant</span>
        </a>

        {% if request.user.is_authenticated %}
        <button class="navbar-toggler hide-border" type="button" data-bs-toggle="offcanvas"
            data-bs-target="#offcanvasDarkNavbar">
            <img class="profile-pic" src="{{request.user.profile.avatar.url}}" alt="Avatar">
            <span><i class="bi bi-chevron-down"></i></span>
        </button>
        {% else %}
        <a href="{% url 'login' %}" class="btn btn-secondary">Login</a>
        {% endif %}
        <div class="offcanvas offcanvas-end text-bg-dark" tabindex="-1" id="offcanvasDarkNavbar"
            aria-labelledby="offcanvasDarkNavbarLabel">
            <div class="offcanvas-header">
                <h5 class="offcanvas-title" id="offcanvasDarkNavbarLabel"><a href="/"
                        class="navbar-brand text-light logo">StudyMate</a></h5>
                <button type="button" class="btn-close btn-close-white float-end" data-bs-dismiss="offcanvas"
                    aria-label="Close"></button>
            </div>
            <div class="offcanvas-body">
                <form action="{% url 'home' %}" method="GET" class="d-flex mt-3 d-lg-none d-block nav-link"
                    role="search">
                    <input class="form-control text-light bg-dark me-2 search-background" name='q' type="search"
                        placeholder="Search rooms" aria-label="Search">
                    <button class="btn btn-success" type="submit">Search</button>
                </form>
                <br class="d-lg-none d-block">
                <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
                    <li class="nav-item my-2">
                        <a class="nav-link" aria-current="page" href="{% url 'user-profile' request.user.id %}"><i
                                class="fa fa-eye" aria-hidden="true"></i> View profile</a>
                    </li>
                    <li class="nav-item my-2">
                        <a class="nav-link" href="{% url 'update_profile' %}"><i class="fa fa-pencil-square-o"
                                aria-hidden="true"></i> Edit profile</a>
                    </li>
                    <li class="nav-item my-2">
                        <a class="nav-link" href="{% url 'bookmarks' request.user.id %}"><i class="bi bi-bookmarks"></i>
                            Bookmarks</a>
                    </li>
                    <li class="nav-item my-2">
                        <a class="nav-link" href="{% url 'logout' %}"><i class="fa fa-sign-out" aria-hidden="true"></i>
                            Logout</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</nav>
